<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - dyna analysis - config/ParameterManager.h</title>
  <link rel="stylesheet" type="text/css" href="../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../index.html">top level</a> - <a href="index.html">config</a> - ParameterManager.h<span style="font-size: 80%;"> (source / <a href="ParameterManager.h.func.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">dyna analysis</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">25</td>
            <td class="headerCovTableEntry">28</td>
            <td class="headerCovTableEntryMed">89.3 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2018-05-05</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">12</td>
            <td class="headerCovTableEntry">17</td>
            <td class="headerCovTableEntryLo">70.6 %</td>
          </tr>
          <tr>
            <td class="headerItem">Legend:</td>
            <td class="headerValueLeg">            Lines:
            <span class="coverLegendCov">hit</span>
            <span class="coverLegendNoCov">not hit</span>
</td>
            <td></td>
          </tr>
          <tr><td><img src="../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : /*---------------------------------------------------------------------------------------------*</a>
<span class="lineNum">       2 </span>            :  * Copyright (C) 2012 Daniel Bola√±os - www.bltek.com - Boulder Language Technologies           *
<span class="lineNum">       3 </span>            :  *                                                                                             *
<span class="lineNum">       4 </span>            :  * www.bavieca.org is the website of the Bavieca Speech Recognition Toolkit                    *
<span class="lineNum">       5 </span>            :  *                                                                                             *
<span class="lineNum">       6 </span>            :  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                             *
<span class="lineNum">       7 </span>            :  * you may not use this file except in compliance with the License.                            *
<span class="lineNum">       8 </span>            :  * You may obtain a copy of the License at                                                     *
<span class="lineNum">       9 </span>            :  *                                                                                             *
<span class="lineNum">      10 </span>            :  *         http://www.apache.org/licenses/LICENSE-2.0                                          *
<span class="lineNum">      11 </span>            :  *                                                                                             *
<span class="lineNum">      12 </span>            :  * Unless required by applicable law or agreed to in writing, software                         *
<span class="lineNum">      13 </span>            :  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                           *
<span class="lineNum">      14 </span>            :  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                    *
<span class="lineNum">      15 </span>            :  * See the License for the specific language governing permissions and                         *
<span class="lineNum">      16 </span>            :  * limitations under the License.                                                              *
<span class="lineNum">      17 </span>            :  *---------------------------------------------------------------------------------------------*/
<span class="lineNum">      18 </span>            : 
<span class="lineNum">      19 </span>            : 
<span class="lineNum">      20 </span>            : #ifndef PARAMETERMANAGER_H
<span class="lineNum">      21 </span>            : #define PARAMETERMANAGER_H
<span class="lineNum">      22 </span>            : 
<span class="lineNum">      23 </span>            : #include &lt;stdio.h&gt;
<span class="lineNum">      24 </span>            : #include &lt;stdlib.h&gt;
<span class="lineNum">      25 </span>            : #include &lt;errno.h&gt;
<span class="lineNum">      26 </span>            : #include &lt;string.h&gt;
<span class="lineNum">      27 </span>            : #include &lt;assert.h&gt;
<span class="lineNum">      28 </span>            : #include &lt;ctype.h&gt;
<span class="lineNum">      29 </span>            : #include &lt;limits.h&gt;
<span class="lineNum">      30 </span>            : #include &lt;float.h&gt;
<span class="lineNum">      31 </span>            : 
<span class="lineNum">      32 </span>            : #include &quot;LogMessage.h&quot;
<span class="lineNum">      33 </span>            : 
<span class="lineNum">      34 </span>            : using namespace std;
<span class="lineNum">      35 </span>            : 
<span class="lineNum">      36 </span>            : #include &lt;string&gt;
<span class="lineNum">      37 </span>            : #include &lt;map&gt;
<span class="lineNum">      38 </span>            : #include &lt;vector&gt;
<span class="lineNum">      39 </span>            : 
<span class="lineNum">      40 </span>            : namespace Bavieca {
<span class="lineNum">      41 </span>            : 
<span class="lineNum">      42 </span>            : #define MAX_PARAMETER_NAME_LENGTH               100
<span class="lineNum">      43 </span>            : 
<span class="lineNum">      44 </span>            : // parameter types
<span class="lineNum">      45 </span>            : #define PARAMETER_TYPE_STRING                           0
<span class="lineNum">      46 </span>            : #define PARAMETER_TYPE_BOOLEAN                  1
<span class="lineNum">      47 </span>            : #define PARAMETER_TYPE_INTEGER                  2
<span class="lineNum">      48 </span>            : #define PARAMETER_TYPE_FLOAT                            3
<span class="lineNum">      49 </span>            : #define PARAMETER_TYPE_FILE                             4
<span class="lineNum">      50 </span>            : #define PARAMETER_TYPE_FOLDER                           5
<span class="lineNum">      51 </span>            : 
<span class="lineNum">      52 </span>            : // parameter types (string format)
<span class="lineNum">      53 </span>            : #define STR_PARAMETER_TYPE_STRING                               &quot;string&quot;
<span class="lineNum">      54 </span>            : #define STR_PARAMETER_TYPE_BOOLEAN                              &quot;yes|no&quot;
<span class="lineNum">      55 </span>            : #define STR_PARAMETER_TYPE_INTEGER                              &quot;int&quot;
<span class="lineNum">      56 </span>            : #define STR_PARAMETER_TYPE_FLOAT                                        &quot;float&quot;
<span class="lineNum">      57 </span>            : #define STR_PARAMETER_TYPE_FILE                                 &quot;file&quot;
<span class="lineNum">      58 </span>            : #define STR_PARAMETER_TYPE_FOLDER                               &quot;folder&quot;
<span class="lineNum">      59 </span>            : 
<span class="lineNum">      60 </span>            : typedef vector&lt;string&gt; VString;
<span class="lineNum">      61 </span>            : 
<span class="lineNum">      62 </span>            : typedef struct {
<a name="63"><span class="lineNum">      63 </span>            :         string strMinimumValue;                         // minimum value the parameter can receive</a>
<span class="lineNum">      64 </span>            :         string strMaximumValue;                         // maximum value the parameter can receive
<span class="lineNum">      65 </span><span class="lineCov">          2 : } AllowedRange;</span>
<span class="lineNum">      66 </span>            : 
<span class="lineNum">      67 </span>            : typedef struct {
<span class="lineNum">      68 </span>            :         int iOrder;
<span class="lineNum">      69 </span>            :         string strName;
<span class="lineNum">      70 </span>            :         string strDescription;
<span class="lineNum">      71 </span>            :         string strValue;
<span class="lineNum">      72 </span>            :         char iType;
<span class="lineNum">      73 </span>            :         string strDefaultValue;
<span class="lineNum">      74 </span>            :         bool bOptional;
<a name="75"><span class="lineNum">      75 </span>            :         VString *vAllowedValues;</a>
<span class="lineNum">      76 </span>            :         AllowedRange *allowedRange;
<span class="lineNum">      77 </span><span class="lineCov">        104 : } Parameter;</span>
<span class="lineNum">      78 </span>            : 
<span class="lineNum">      79 </span>            : typedef map&lt;string,Parameter*&gt; MParameter;
<span class="lineNum">      80 </span>            : 
<span class="lineNum">      81 </span>            : // incompatibility between two parameters
<span class="lineNum">      82 </span>            : typedef struct {
<span class="lineNum">      83 </span>            :         VString *vParameters;
<span class="lineNum">      84 </span>            :         bool bOneRequired;                      // whether one of the parameters has to be defined
<span class="lineNum">      85 </span>            : } Incompatibility;
<span class="lineNum">      86 </span>            : 
<span class="lineNum">      87 </span>            : typedef vector&lt;Incompatibility&gt; VIncompatibility;
<span class="lineNum">      88 </span>            : 
<span class="lineNum">      89 </span>            : typedef struct {
<a name="90"><span class="lineNum">      90 </span>            :         string strParameter;</a>
<span class="lineNum">      91 </span>            :         string strValue;        
<span class="lineNum">      92 </span><span class="lineCov">        266 : } ParameterValue;</span>
<span class="lineNum">      93 </span>            : 
<span class="lineNum">      94 </span>            : typedef vector&lt;ParameterValue&gt; VParameterValue;
<span class="lineNum">      95 </span>            : 
<span class="lineNum">      96 </span>            : // dependenty of one parameter respect to another parameter(s) and their respective value(s), taken as an OR, so the said parameter can only be defined if at least one of those parameters(values) is set
<span class="lineNum">      97 </span>            : typedef struct {
<a name="98"><span class="lineNum">      98 </span>            :         string strParameter;</a>
<span class="lineNum">      99 </span>            :         VParameterValue vParameterValue;                        // set of pairs parameter-value that need to be set in order for strParameter to be set
<span class="lineNum">     100 </span><span class="lineNoCov">          0 : } Dependency;</span>
<span class="lineNum">     101 </span>            : 
<span class="lineNum">     102 </span>            : typedef vector&lt;Dependency&gt; VDependency;
<span class="lineNum">     103 </span>            : 
<span class="lineNum">     104 </span>            : /**
<span class="lineNum">     105 </span>            :         @author daniel &lt;dani.bolanos@gmail.com&gt;
<span class="lineNum">     106 </span>            : */
<span class="lineNum">     107 </span>            : class ParameterManager {
<span class="lineNum">     108 </span>            : 
<span class="lineNum">     109 </span>            :         protected:
<span class="lineNum">     110 </span>            :         
<span class="lineNum">     111 </span>            :                 MParameter m_mParameter;
<span class="lineNum">     112 </span>            :                 VIncompatibility m_vIncompatibility;
<span class="lineNum">     113 </span>            :                 VDependency m_vDependency;
<span class="lineNum">     114 </span>            :                 
<span class="lineNum">     115 </span>            :                 // return the list of items from a string of characters of the form &quot;item1|item2|...|itemN&quot;
<span class="lineNum">     116 </span>            :                 VString *getItemList(const char *strItems);
<span class="lineNum">     117 </span>            :                 
<span class="lineNum">     118 </span>            :                 // return the range of values from the given string
<span class="lineNum">     119 </span>            :                 AllowedRange *getRange(const char *strRange);
<span class="lineNum">     120 </span>            :                 
<span class="lineNum">     121 </span>            :                 // checks whether a string of characters represents a floating point number
<span class="lineNum">     122 </span>            :                 bool isFloat(const char *strSource);
<span class="lineNum">     123 </span>            :                 
<span class="lineNum">     124 </span>            :                 // checks whether a string of characters represents an integer
<span class="lineNum">     125 </span>            :                 bool isInteger(const char *strSource);
<span class="lineNum">     126 </span>            :                 
<span class="lineNum">     127 </span>            :                 // checks whether a string of characters represents an integer
<span class="lineNum">     128 </span>            :                 bool isBoolean(const char *strSource);
<span class="lineNum">     129 </span>            :                 
<span class="lineNum">     130 </span>            :                 // return the parameter type in string format
<span class="lineNum">     131 </span>            :                 const char *getStrParameterType(char iType);
<span class="lineNum">     132 </span>            : 
<span class="lineNum">     133 </span>            :         public:
<span class="lineNum">     134 </span>            : 
<span class="lineNum">     135 </span>            :                 // constructor
<span class="lineNum">     136 </span>            :                 ParameterManager();
<span class="lineNum">     137 </span>            : 
<span class="lineNum">     138 </span>            :                 // destructor
<span class="lineNum">     139 </span>            :                 ~ParameterManager();
<span class="lineNum">     140 </span>            :                 
<span class="lineNum">     141 </span>            :                 // define a command line parameter
<span class="lineNum">     142 </span>            :                 bool defineParameter(const char *strName, const char *strDescription, char iType, 
<span class="lineNum">     143 </span>            :                         bool bOptional = false, const char *strValueConstraints = NULL, const char *strDefaultValue = NULL);
<span class="lineNum">     144 </span>            :                         
<span class="lineNum">     145 </span>            :                 // parse the given parameter-value types
<span class="lineNum">     146 </span>            :                 void parse(VParameterValue &amp;vParameterValue);       
<span class="lineNum">     147 </span>            :                         
<span class="lineNum">     148 </span>            :                 // set a parameter value
<span class="lineNum">     149 </span>            :                 void setParameterValue(const char *strName, const char *strValue);
<span class="lineNum">     150 </span>            :                 
<span class="lineNum">     151 </span>            :                 // return a parameter value
<span class="lineNum">     152 </span>            :                 const char *getParameterValue(const char *strName);     
<span class="lineNum">     153 </span>            :                 
<span class="lineNum">     154 </span>            :                 // return whether a parameter value is set
<span class="lineNum">     155 </span>            :                 bool isParameterSet(const char *strParameter);  
<span class="lineNum">     156 </span>            :                 
<span class="lineNum">     157 </span>            :                 // print the parameters defined
<span class="lineNum">     158 </span>            :                 void print();
<span class="lineNum">     159 </span>            :                 
<span class="lineNum">     160 </span>            :                 // set allowed values for the given parameter
<span class="lineNum">     161 </span>            :                 //bool setParameterAllowedValues(const char *strParameter, const char *strAllowedValues);
<span class="lineNum">     162 </span>            :                 
<span class="lineNum">     163 </span>            :                 // set the allowed range for a parameter value 
<span class="lineNum">     164 </span>            :                 //bool setParameterAllowedRange(const char *strParameter, const char *strMinimumValue, const char *strMaximumValue);
<span class="lineNum">     165 </span>            :                 
<span class="lineNum">     166 </span>            :                 // define an incompatibility between parameters (if one is set, any of the others can be set)
<span class="lineNum">     167 </span>            :                 bool defineIncompatibility(const char *strParameters, bool bOneRequired);
<span class="lineNum">     168 </span>            :                 
<span class="lineNum">     169 </span>            :                 // define a dependency of one parameter respect to the other parameters and their respective values
<span class="lineNum">     170 </span>            :                 // the parameters and values are expressed as follows: parameter1(value1)|...|parameterN(valueN)
<span class="lineNum">     171 </span>            :                 bool defineDependency(const char *strParameter, const char *strParametersAndValues);
<a name="172"><span class="lineNum">     172 </span>            :                 </a>
<span class="lineNum">     173 </span>            :                 // convert a string to a bool
<span class="lineNum">     174 </span><span class="lineCov">          3 :                 inline static bool str2bool(const char* str) {  </span>
<span class="lineNum">     175 </span><span class="lineCov">          3 :                         if (strcmp(str,&quot;yes&quot;) == 0) {</span>
<span class="lineNum">     176 </span><span class="lineCov">          3 :                                 return true;</span>
<span class="lineNum">     177 </span>            :                         } else {
<span class="lineNum">     178 </span><span class="lineNoCov">          0 :                                 assert(strcmp(str,&quot;no&quot;) == 0);</span>
<span class="lineNum">     179 </span><span class="lineNoCov">          0 :                                 return false;</span>
<span class="lineNum">     180 </span>            :                         }
<span class="lineNum">     181 </span>            :                 }
<a name="182"><span class="lineNum">     182 </span>            :                 </a>
<span class="lineNum">     183 </span>            :                 // return a parameter in string format
<span class="lineNum">     184 </span><span class="lineCov">         12 :                 inline const char *getStrParameterValue(const char *strParameter) {</span>
<span class="lineNum">     185 </span>            :                         
<span class="lineNum">     186 </span><span class="lineCov">         12 :                         MParameter::iterator it = m_mParameter.find(strParameter);</span>
<span class="lineNum">     187 </span><span class="lineCov">         12 :                         assert(it != m_mParameter.end());</span>
<span class="lineNum">     188 </span>            :                 
<span class="lineNum">     189 </span><span class="lineCov">         12 :                         return it-&gt;second-&gt;strValue.c_str();</span>
<span class="lineNum">     190 </span>            :                 }
<a name="191"><span class="lineNum">     191 </span>            :                 </a>
<span class="lineNum">     192 </span>            :                 // return a parameter in integer format
<span class="lineNum">     193 </span><span class="lineCov">         14 :                 inline int getIntParameterValue(const char *strParameter) {</span>
<span class="lineNum">     194 </span>            :                         
<span class="lineNum">     195 </span><span class="lineCov">         14 :                         MParameter::iterator it = m_mParameter.find(strParameter);</span>
<span class="lineNum">     196 </span><span class="lineCov">         14 :                         assert(it != m_mParameter.end());</span>
<span class="lineNum">     197 </span><span class="lineCov">         14 :                         assert(it-&gt;second-&gt;iType == PARAMETER_TYPE_INTEGER);</span>
<span class="lineNum">     198 </span>            :                 
<span class="lineNum">     199 </span><span class="lineCov">         14 :                         return atoi(it-&gt;second-&gt;strValue.c_str());</span>
<span class="lineNum">     200 </span>            :                 }
<a name="201"><span class="lineNum">     201 </span>            : </a>
<span class="lineNum">     202 </span>            :                 // return a parameter in floating point format
<span class="lineNum">     203 </span><span class="lineCov">          6 :                 inline float getFloatParameterValue(const char *strParameter) {</span>
<span class="lineNum">     204 </span>            :                         
<span class="lineNum">     205 </span><span class="lineCov">          6 :                         MParameter::iterator it = m_mParameter.find(strParameter);</span>
<span class="lineNum">     206 </span><span class="lineCov">          6 :                         assert(it != m_mParameter.end());</span>
<span class="lineNum">     207 </span><span class="lineCov">          6 :                         assert(it-&gt;second-&gt;iType == PARAMETER_TYPE_FLOAT);</span>
<span class="lineNum">     208 </span>            :                 
<span class="lineNum">     209 </span><span class="lineCov">          6 :                         return (float)atof(it-&gt;second-&gt;strValue.c_str());</span>
<span class="lineNum">     210 </span>            :                 }
<a name="211"><span class="lineNum">     211 </span>            :                 </a>
<span class="lineNum">     212 </span>            :                 // return a parameter in bool format
<span class="lineNum">     213 </span><span class="lineCov">          3 :                 inline bool getBoolParameterValue(const char *strParameter) {</span>
<span class="lineNum">     214 </span>            :                 
<span class="lineNum">     215 </span><span class="lineCov">          3 :                         MParameter::iterator it = m_mParameter.find(strParameter);</span>
<span class="lineNum">     216 </span><span class="lineCov">          3 :                         assert(it != m_mParameter.end());</span>
<span class="lineNum">     217 </span><span class="lineCov">          3 :                         assert(it-&gt;second-&gt;iType == PARAMETER_TYPE_BOOLEAN);</span>
<span class="lineNum">     218 </span>            :                         
<span class="lineNum">     219 </span><span class="lineCov">          3 :                         return str2bool(it-&gt;second-&gt;strValue.c_str());    </span>
<span class="lineNum">     220 </span>            :                 }
<span class="lineNum">     221 </span>            :                 
<span class="lineNum">     222 </span>            :                 // print a dependency
<span class="lineNum">     223 </span>            :                 void print(Dependency *dependency);
<span class="lineNum">     224 </span>            : };
<span class="lineNum">     225 </span>            : 
<span class="lineNum">     226 </span>            : };      // end-of-namespace
<span class="lineNum">     227 </span>            : 
<span class="lineNum">     228 </span>            : #endif
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.10</a></td></tr>
  </table>
  <br>

</body>
</html>
